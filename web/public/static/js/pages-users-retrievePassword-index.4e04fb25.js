(self["webpackChunkcmi_uni_app"]=self["webpackChunkcmi_uni_app"]||[]).push([[271],{98470:function(t,e,a){var i=a(93162);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var n=a(69333).A;n("383dcef6",i,!0,{sourceMap:!1,shadowMode:!1})},54369:function(t,e,a){"use strict";var i;a.r(e),a.d(e,{default:function(){return g}});var n,c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"register absolute",style:t.viewColor},[a("div",{staticClass:"whiteBg",style:{"background-image":"url("+t.domain+"/static/images/logo_bgl.png)"}},[a("v-uni-view",{staticClass:"login_title"},[a("v-uni-view",{staticClass:"title_h"},[t._v("找回密码")])],1),a("div",{staticClass:"list"},[a("div",{staticClass:"item"},[a("v-uni-input",{attrs:{type:"text",placeholder:"输入手机号码","placeholder-class":"placeholder",autocomplete:"off"},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}}),a("v-uni-input",{staticStyle:{height:"0",opacity:"0"},attrs:{type:"text"}})],1),a("div",{staticClass:"item"},[a("v-uni-input",{attrs:{type:"password",placeholder:"填写您的新密码","placeholder-class":"placeholder",autocomplete:"off"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("div",{staticClass:"item"},[a("v-uni-input",{attrs:{type:"password",placeholder:"再次输入新密码","placeholder-class":"placeholder",autocomplete:"off"},model:{value:t.confirm_pwd,callback:function(e){t.confirm_pwd=e},expression:"confirm_pwd"}})],1),a("div",{staticClass:"item"},[a("v-uni-input",{staticClass:"codeIput",attrs:{type:"text",placeholder:"填写验证码","placeholder-class":"placeholder",autocomplete:"off"},model:{value:t.captcha,callback:function(e){t.captcha=e},expression:"captcha"}}),a("v-uni-button",{staticClass:"code",class:!0===t.disabled?"on":"",attrs:{disabled:t.disabled},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleVerify.apply(void 0,arguments)}}},[t._v(t._s(t.text))])],1)]),a("div",{staticClass:"logon",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.registerReset.apply(void 0,arguments)}}},[t._v("确认")]),a("div",{staticClass:"tip"},[a("v-uni-text",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[t._v("立即登录")])],1)],1),a("div",{staticClass:"bottom"}),a("Verify",{ref:"verify",attrs:{captchaType:"blockPuzzle",imgSize:{width:"330px",height:"155px"}},on:{success:function(e){arguments[0]=e=t.$handleEvent(e),t.success.apply(void 0,arguments)}}})],1)},s=[],o=a(42727),r=a(50575),l=(a(27495),a(90906),a(45013)),u=a(76935),p=a(40658),d=(a(7416),a(24384)),f=a(11974),h=a(7379),v=(getApp(),{name:"RetrievePassword",components:{Verify:h.A},mixins:[u.A],data:function(){return{account:"",password:"",confirm_pwd:"",captcha:"",codeKey:"",codeUrl:"",codeVal:"",isShowCode:!1,domain:f.HTTP_REQUEST_URL}},computed:(0,d.f4)(["login_logo"],(0,l.mapGetters)(["viewColor"])),onReady:function(){},mounted:function(){},methods:{back:function(){uni.navigateBack()},again:function(){this.codeUrl=VUE_APP_API_URL+"/captcha?"+this.keyCode+Date.parse(new Date)},code:function(t){var e=this;return(0,r.A)((0,o.A)().mark((function a(){var i;return(0,o.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=e,i.account){a.next=3;break}return a.abrupt("return",i.$util.Tips({title:"请填写手机号码"}));case 3:if(/^1(3|4|5|7|8|9|6)\d{9}$/i.test(i.account)){a.next=5;break}return a.abrupt("return",i.$util.Tips({title:"请输入正确的手机号码"}));case 5:return a.next=7,(0,p.t2)({phone:i.account,type:"change_pwd",captchaType:"blockPuzzle",captchaVerification:t.captchaVerification}).then((function(t){i.$util.Tips({title:t.message}),i.sendCode()})).catch((function(t){i.$util.Tips({title:t})}));case 7:case"end":return a.stop()}}),a)})))()},getcaptcha:function(){var t=this;(0,p.z8)().then((function(e){t.codeUrl=e.data.captcha,t.codeVal=e.data.code,t.codeKey=e.data.key})),t.isShowCode=!0},registerReset:function(){var t=this;return(0,r.A)((0,o.A)().mark((function e(){var a;return(0,o.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t,a.account){e.next=3;break}return e.abrupt("return",a.$util.Tips({title:"请填写手机号码"}));case 3:if(/^1(3|4|5|7|8|9|6)\d{9}$/i.test(a.account)){e.next=5;break}return e.abrupt("return",a.$util.Tips({title:"请输入正确的手机号码"}));case 5:if("123456"!=a.password){e.next=7;break}return e.abrupt("return",a.$util.Tips({title:"您输入的密码过于简单"}));case 7:if(a.password==a.confirm_pwd){e.next=9;break}return e.abrupt("return",a.$util.Tips({title:"两次密码不一致"}));case 9:if(a.captcha){e.next=11;break}return e.abrupt("return",a.$util.Tips({title:"请填写验证码"}));case 11:(0,p.NU)({phone:a.account,sms_code:a.captcha,pwd:a.password,confirm_pwd:a.confirm_pwd}).then((function(t){a.$util.Tips({title:t.message},{tab:3})})).catch((function(t){a.$util.Tips({title:t})}));case 12:case"end":return e.stop()}}),e)})))()},success:function(t){this.$refs.verify.hide(),this.code(t)},handleVerify:function(){this.$refs.verify.show()}}}),m=v,w=(a(98470),a(18535)),b=(0,w.A)(m,c,s,!1,null,"2d19a76c",null,!1,i,n),g=b.exports},93162:function(t,e,a){"use strict";a.r(e);var i=a(45522),n=a.n(i),c=a(67643),s=a.n(c),o=s()(n());o.push([t.id,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.register[data-v-2d19a76c]{background:#fff;height:100vh}.register .list .item .code[data-v-2d19a76c]{color:var(--view-theme)}.whiteBg .logon[data-v-2d19a76c]{display:flex;align-items:center;justify-content:center;width:100%;height:%?86?%;margin-top:%?48?%;background-color:var(--view-theme);border-radius:%?120?%;color:#fff;font-size:%?30?%}.whiteBg[data-v-2d19a76c]{background-repeat:no-repeat;background-size:100% auto}',""]),e["default"]=o},7416:function(t,e,a){"use strict";a(27495),a(90906)}}]);